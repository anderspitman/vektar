!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const s="http://www.w3.org/2000/svg";function r(){this.state={x:0,y:0,scale:1,rotationDegrees:0,anchorX:0,anchorY:0}}r.prototype.getDomElement=function(){return this.el},r.prototype.setState=function(t){return this.state=t,this},r.prototype.updateState=function(t){for(let e in t)this.state[e]=t[e];return this},r.prototype.setPosition=function({x:t,y:e}){return this.state.x=t-this.state.anchorX,this.state.y=e-this.state.anchorY,this.updateTransform(),this},r.prototype.setScale=function(t){return this.state.scale=t,this.updateTransform(),this},r.prototype.setRotationDegrees=function({angleDegrees:t}){return this.state.rotationDegrees=t,this.updateTransform(),this},r.prototype.setAnchor=function({x:t,y:e}){return this.state.anchorX=t,this.state.anchorY=e,this},r.prototype.setVisible=function(t){return this.el.setAttributeNS(null,"visibility",t?"visible":"hidden"),this},r.prototype.setStrokeColor=function(t){return this.el.setAttributeNS(null,"stroke",t),this},r.prototype.setFillColor=function(t){return this.el.setAttributeNS(null,"fill",t),this},r.prototype.updateTransform=function(){return this.el.setAttributeNS(null,"transform","translate("+this.state.x+", "+this.state.y+") rotate("+this.state.rotationDegrees+", "+this.state.anchorX+", "+this.state.anchorY+") scale("+this.state.scale+")"),this};class n extends r{constructor(){super();const t=document.createElementNS(s,"g");this.el=t,this.children=[],this.idChildren={}}addChild(t){this.children.push(t),this.el.appendChild(t.getDomElement())}addChildWithId({id:t,child:e}){this.addChild(e),this.idChildren[t]=e}getChildById(t){return this.idChildren[t]}}class o extends r{constructor(){super();const t=document.createElementNS(s,"circle");t.setAttributeNS(null,"cx",0),t.setAttributeNS(null,"cy",0),t.setAttributeNS(null,"r",10),t.setAttributeNS(null,"fill","none"),t.setAttributeNS(null,"stroke","#1bd100"),this.el=t}setRadius(t){return this.el.setAttributeNS(null,"r",t),this}}class h extends r{constructor(){super(),this.el=document.createElementNS(s,"rect")}setWidth(t){return this.el.setAttributeNS(null,"width",t),this}setHeight(t){return this.el.setAttributeNS(null,"height",t),this}}class l extends r{constructor(){super(),this.el=document.createElementNS(s,"polygon")}setWidth(t){return this.state.width=t,this}setHeight(t){return this.state.height=t,this}setVertices({vertex1:t,vertex2:e,vertex3:i}){const s=this.state.width,r=this.state.height;return this.el.setAttributeNS(null,"points",t.x*s+" "+t.y*r+", "+e.x*s+" "+e.y*r+", "+i.x*s+" "+i.y*r),this}}i(1);const c=37,a=39,d=38,u=Math.PI/180;const g={x:1200,y:1200,rotationDegrees:0,scale:1,color:"blue",initialRotationDegrees:-90,velocity:{x:0,y:0}},p=[{primitiveId:"ship",instances:[g]},{primitiveId:"planet",instances:[{x:1e3,y:1e3,rotationDegrees:0,scale:1,showBuilding:!0,hasRadar:!1,color:"blue"},{x:1300,y:1300,rotationDegrees:0,scale:1,showBuilding:!0,hasRadar:!0,color:"yellow"}]}],x=new class{constructor({domElementId:t,canvasSize:e}){this.parent=document.getElementById(t);const i=this.parent.getBoundingClientRect();this.width=i.width,this.height=i.height,this.svg=document.createElementNS(s,"svg"),this.svg.setAttributeNS(null,"width",i.width),this.svg.setAttributeNS(null,"height",i.height),this.root=document.createElementNS(s,"g"),this.svg.appendChild(this.root),this.backgroundRect=document.createElementNS(s,"rect"),this.backgroundRect.setAttributeNS(null,"width",e.width),this.backgroundRect.setAttributeNS(null,"height",e.height),this.backgroundRect.setAttributeNS(null,"fill","white"),this.root.appendChild(this.backgroundRect),this.parent.appendChild(this.svg),this.primitives={},this.scene={}}setBackgroundColor(t){this.backgroundRect.setAttributeNS(null,"fill",t)}setViewportPosition({x:t,y:e}){this.root.setAttributeNS(null,"transform","translate("+-t+", "+-e+")")}getWidth(){return this.width}getHeight(){return this.height}registerPrimitive({id:t,create:e,render:i}){if(void 0!==this.primitives[t])throw"Primitive already defined";const s=this;function n(){r.call(this),this.ctx=s}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.create=e,n.prototype.render=i,this.primitives[t]=n}createPrimitive({primitiveId:t}){const e=new this.primitives[t];return e.obj=e.create(),e.el=e.obj.el,e}createGroup(){return new n}addToGroup({group:t,element:e}){t.addChild(e)}createCircle(){return new o}createRectangle(){return new h}createTriangle(){return new l}render({scene:t}){for(let e of t){void 0===this.scene[e.primitiveId]&&(this.scene[e.primitiveId]={instances:[]});const t=this.scene[e.primitiveId],i=t.instances.length-e.instances.length;if(i<0){const s=Math.abs(i);for(let i=0;i<s;i++){const i=this.createPrimitive({primitiveId:e.primitiveId});t.instances.push(i),this.root.appendChild(i.getDomElement())}}for(let i=0;i<t.instances.length;i++){const s=t.instances[i],r=e.instances[i];s.setPosition({x:r.x,y:r.y}),s.setRotationDegrees({angleDegrees:r.rotationDegrees}),s.setScale(r.scale),s.render({state:r})}}}}({domElementId:"root",canvasSize:{width:1e4,height:1e4}});x.registerPrimitive({id:"ship",create:function(){return this.setAnchor({x:10,y:10}),this.group=this.ctx.createGroup(),this.tri=this.ctx.createTriangle().setWidth(20).setHeight(20).setVertices({vertex1:{x:.5,y:0},vertex2:{x:1,y:1},vertex3:{x:0,y:1}}),this.group.addChild(this.tri),this.leftThruster=this.ctx.createTriangle().setWidth(4).setHeight(4).setPosition({x:2,y:20}).setVertices({vertex1:{x:0,y:0},vertex2:{x:1,y:0},vertex3:{x:.5,y:1}}),this.group.addChild(this.leftThruster),this.rightThruster=this.ctx.createTriangle().setWidth(4).setHeight(4).setPosition({x:15,y:20}).setVertices({vertex1:{x:0,y:0},vertex2:{x:1,y:0},vertex3:{x:.5,y:1}}),this.group.addChild(this.rightThruster),this.group},render:function({state:t}){this.tri.setStrokeColor(t.color),this.setRotationDegrees({angleDegrees:t.rotationDegrees}),this.leftThruster.setStrokeColor("#23fbff"),this.leftThruster.setVisible(t.thrustersOn),this.rightThruster.setStrokeColor("#23fbff"),this.rightThruster.setVisible(t.thrustersOn)}}),x.registerPrimitive({id:"radar-building",create:function(){const t=this.ctx.createGroup().setPosition({x:0,y:40});return this.building=this.ctx.createRectangle().setWidth(40).setHeight(20).setFillColor("none"),t.addChild(this.building),this.dish=this.ctx.createTriangle().setPosition({x:30,y:-20}).setWidth(30).setHeight(30).setVertices({vertex1:{x:0,y:0},vertex2:{x:1,y:1},vertex3:{x:.3,y:.7}}),t.addChild(this.dish),t},render:function({state:t}){this.setVisible(t.hasRadar),this.building.setStrokeColor(t.color),this.dish.setStrokeColor(t.color)}}),x.registerPrimitive({id:"planet",create:function(){const t=this.ctx.createGroup(),e=this.ctx.createCircle().setRadius(100);return t.addChild(e),this.teamIndicator=this.ctx.createRectangle().setWidth(10).setHeight(10).setPosition({x:-5,y:-5}),t.addChild(this.teamIndicator),this.centerBuilding=this.ctx.createRectangle().setWidth(40).setHeight(40).setPosition({x:-20,y:-20}).setFillColor("none"),t.addChild(this.centerBuilding),this.leftBuilding=this.ctx.createRectangle().setWidth(40).setHeight(80).setPosition({x:-70,y:-40}).setFillColor("none"),t.addChild(this.leftBuilding),this.topBuilding=this.ctx.createRectangle().setWidth(45).setHeight(30).setPosition({x:0,y:-70}).setFillColor("none"),t.addChild(this.topBuilding),this.radar=this.ctx.createPrimitive({primitiveId:"radar-building"}),t.addChild(this.radar),t},render:function({state:t}){t.showBuilding&&this.leftBuilding.setVisible(!0),this.teamIndicator.setStrokeColor(t.color),this.teamIndicator.setFillColor(t.color),this.centerBuilding.setStrokeColor(t.color),this.leftBuilding.setStrokeColor(t.color),this.topBuilding.setStrokeColor(t.color),this.radar.render({state:t})}}),x.setBackgroundColor("black");const y={};document.addEventListener("keyup",function(t){y[t.keyCode]=!1}),document.addEventListener("keydown",function(t){y[t.keyCode]=!0});const f=new class{constructor(t){this.ctx=t}setCenterPosition({x:t,y:e}){const i=t-this.ctx.getWidth()/2,s=e-this.ctx.getHeight()/2;this.ctx.setViewportPosition({x:i,y:s})}}(x);requestAnimationFrame(function t(){y[c]?g.rotationDegrees-=5:y[a]&&(g.rotationDegrees+=5),g.thrustersOn=y[d];const e=(g.rotationDegrees+g.initialRotationDegrees)*u,i=Math.cos(e),s=Math.sin(e);g.thrustersOn&&(g.velocity.x+=.1*i,g.velocity.y+=.1*s),g.x+=g.velocity.x,g.y+=g.velocity.y,f.setCenterPosition({x:g.x,y:g.y}),x.render({scene:p}),requestAnimationFrame(t)})},function(t,e){}]);